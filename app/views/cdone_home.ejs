<style>


    .channel_form_container {

        width: 100vw;
        height: 95vh;
        align-content: center;
        align-items: center;
        overflow: hidden;
        overflow-y: scroll;


        margin-top: 2px;

        padding: 10px;


    }

    .channel_form_host {

        display: grid;
        grid-column: 4 / 7;
        grid-row: 2;
        width: 100%;
        height: 100%;
        background-color: rgb(46, 45, 45);
        color: beige;
        overflow: auto;

        margin: 20px,20px;
       gap: 50px;
        bottom: 20px;

    }

    .formhouse {

        border-radius: 15px;
        color: rgb(204, 203, 202);
        background-color: rgb(49, 49, 48);
        top: 20px;
        margin: auto;
        width: 800px;
        padding: 30px;
  


    }

    .gwhite {
        border-radius: 15px;
        background-color: rgb(204, 203, 202);
    }


    .smallwhite {
        color: rgb(204, 203, 202);
        font-size: small;
        text-align: center;
        width: 100%;

    }

    .clear {

        width: 100%;

    }


    .file > label {
        background-color: indigo;
        color: white;
        padding: 0.5rem;
        font-family: sans-serif;
        border-radius: 0.3rem;
        cursor: pointer;
        margin-top: 1rem;
    }


    .lex {
        background-color: white;
        color: indigo;
        padding: 0.5rem;
        font-family: sans-serif;
        border-radius: 0.3rem;
        cursor: pointer;
        margin-top: 1rem;
    }

    .gap-space-4 {
        display: grid;
        grid-gap: 4px;
        margin: 4px, 4px;
    }


    .avatar {
		margin: 0 auto 30px;
		width: 100px;
		height: 100px;
		border-radius: 50%;
		z-index: 9;
		background: #4aba70;
		padding: 15px;
		box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
	}
 .avatar img {
		width: 100%;
	}
</style>
<% 
var valueData;
var channel_id;
channel_name="";

var username;
username = (typeof username == 'undefined') ? user.username :username 
var r_username ="";
var r_channel_id="";
if(typeof returned != 'undefined'){

r_username = returned.email;
r_channel_id= returned.channel_id;

}

 username =(typeof user != 'undefined')? user.username:r_username  ;
//var channel_id =(typeof user != 'undefined')? user.username:r_username  ;
%>
<div class="channel_form_container">
    <div id="" class="formhouse">

        <form class="row gy-2 gx-3 align-items-center shadow   needs-validation" autocomplete="on" action="/create_channel"  method="post" >
   <div class="shadow  col-md-12 ">
                <h3 class="center">Channel Manger 2.0</h3>

       <% 
      const non_c = {channel:"", role:'new'};
//disDatOr



if(typeof user !='undefined' && typeof  returned  == 'undefined'){
  var  owner = user.name;
  var email = user.username;
  //var channel_id = user.

  console.log("at 10", user);



  valueData = (user.adminchannel==""|| user.adminchannel===[]||user.adminchannel==[""])? non_c :user.adminchannel[0][0];
 
     console.log("at 11", valueData);
 channel_id =valueData.channel;
   } else {



   //if(typeof !returned2 === 'undefined'){
    if( typeof returned  != 'undefined'){

var {channel_id, country ,owner,email,channel_name,password, channel_info,contact_email,telephone_contact,address,city,start_time,timezone,logo,cbrand,thumbnail,adminemail,ckeyword} = returned;
   
   

     console.log("at 12", valueData);

     channel_id =returned.channel_id ;
    username =returned.email;

} else{
   
    var valueData = {
         adminchannel:"", 
    channel:"" };

    channel_id ='';
    username ='';
   }

console.log("at 13", valueData);

    }

   
if (channel_name=="" || channel_name =='undefined')channel_name = channel_id; 


     //let uxt = non_c;
      %>


               
            </div>

            <%= typeof  returned  != 'undefined' ? returned.id:""%>
            <div class="avatar clear ">
                <img src="/images/avatar3.png" alt="Avatar">
            </div>    
            <div class="clear">   </div>         

<% if(typeof err != 'undefined' ){%>
    <div class="alert alert-dismissible alert-danger">
      <button class="close" type="button" data-dismiss="alert">&times;</button>
      <strong><%= err %></strong> 
    </div>	
  <% } %>
  <% if(success_msg != '' ){ %>
            <div class="alert alert-dismissible alert-success">
            <button class="close" type="button" data-dismiss="alert">&times;</button>
            <strong><%= success_msg %></strong> 
            </div>  
  <% } %>
  
  <% if( error != '' ){%>
    <div class="alert alert-dismissible alert-danger">
    <button class="close" type="button" data-dismiss="alert">&times;</button>
    <strong><%= error %></strong>
    </div>
  <% } %>
  
  
    <div class="col-md-6">

                <label for="" class="form-label">* Channel ID</label>
                <div class="input-group">

                    <div class="input-group-text">
                        <i class="fa-solid fa-key"></i>
                    </div>

                    <input type="text" class="form-control" id="channel_id" value="<%= channel_id %>"  name="channel_id" placeholder="channel_id" minlength="5" maxlength="12" required onchange="imedia.checkChannel_ID(this)" onkeyup="imedia.checkChannel_ID(this)">
                </div>
                <label class="form-label smallwhite"   id="forchannel_id" for="channel_id">Channel ID</label>
            </div>
        </div>